<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Defines a report stub — stub • reporter</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Defines a report stub — stub" />
<meta property="og:description" content="Combine columns into a nested report stub.  The report stub
is a common feature of statistical reports.  The stub is created with
the stub function, and frequently appears in combination with the 
label_row and indent parameters from the 
define function.  These elements work together to define
the appearance of the stub." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reporter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/reporter.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/reporter-listing.html">Example 1: Listing</a>
    </li>
    <li>
      <a href="../articles/reporter-table.html">Example 2: Table</a>
    </li>
    <li>
      <a href="../articles/reporter-stub.html">Example 3: Table Stub</a>
    </li>
    <li>
      <a href="../articles/reporter-spanning.html">Example 5: Spanning Headers</a>
    </li>
    <li>
      <a href="../articles/reporter-text.html">Example 4: Table and Text</a>
    </li>
    <li>
      <a href="../articles/reporter-pageby.html">Example 7: Page By</a>
    </li>
    <li>
      <a href="../articles/reporter-wrap.html">Example 6: Page Wrap</a>
    </li>
    <li>
      <a href="../articles/reporter-title_header.html">Example 8: Title Header</a>
    </li>
    <li>
      <a href="../articles/reporter-rtf.html">Example 9: RTF and PDF</a>
    </li>
    <li>
      <a href="../articles/reporter-figure.html">Example 10: Figure</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Defines a report stub</h1>
    
    <div class="hidden name"><code>stub.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combine columns into a nested report stub.  The report stub
is a common feature of statistical reports.  The stub is created with
the <code>stub</code> function, and frequently appears in combination with the 
<code>label_row</code> and <code>indent</code> parameters from the 
<code><a href='define.html'>define</a></code> function.  These elements work together to define
the appearance of the stub.</p>
    </div>

    <pre class="usage"><span class='fu'>stub</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>vars</span>, label <span class='op'>=</span> <span class='st'>""</span>, label_align <span class='op'>=</span> <span class='cn'>NULL</span>, align <span class='op'>=</span> <span class='st'>"left"</span>, width <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>The table spec.</p></td>
    </tr>
    <tr>
      <th>vars</th>
      <td><p>A vector of quoted or unquoted variable names from 
which to create the stub. If you want to pass an R variable of names,
escape the values with double curly braces, i.e. <code>vars = {{myvar}}</code>.
The curly brace escape is useful when writing functions that construct
reports dynamically.</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>The label for the report stub.  The default label is an empty
string.</p></td>
    </tr>
    <tr>
      <th>label_align</th>
      <td><p>The alignment for the stub column label.
Valid values are 'left', 'right', 'center', and 'centre'.  Default follows
the <code>align</code> parameter.</p></td>
    </tr>
    <tr>
      <th>align</th>
      <td><p>How to align the stub column.  Valid values are 'left', 
'right', 'center', and 'centre'.  Default is 'left'.</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>The width of the stub, in report units of measure.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The modified table spec.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The table stub is a nested set of labels that identify rows 
on the table. The stub is created by combining two or more columns into 
a single stub column.  The relationship between the columns is typically 
visualized as a hierarchy, with lower level concepts indented under 
higher level concepts.</p>
<p>A typical stub is created with the following steps:</p><ul>
<li><p>Prepare the data.</p></li>
<li><p>Create the table object.</p></li>
<li><p>Define the stub on the table using the <code>stub</code> function, 
  and identify the variables to be combined.</p></li>
<li><p>Identify higher level concepts with the <code>label_row</code> parameter
  on the <code><a href='define.html'>define</a></code> function.</p></li>
<li><p>Identify lower level concepts using the <code>indent</code> parameter 
  on the <code><a href='define.html'>define</a></code> function.</p></li>
</ul>

<p>The stub will be automatically added as an identity variable on the report, 
and will always appear as the leftmost column.  There can only be one stub 
defined on a report.</p>
<p>If you wish to create multiple levels of nested labels, use
an NA value to prevent lower level labels from overwriting
higher level labels.</p>
<p>For example, the following data:</p><pre>
continent          country   state_province    
"North America"    NA        NA   
"North America"    "Canada"  NA   
"North America"    "Canada"  "Ontario"   
"North America"    "USA"     NA   
"North America"    "USA"     "New York"   
"South America"    NA        NA   
"South America"    "Brazil"  NA   
"South America"    "Brazil"  "Amazonas"   
"South America"    "Brazil"  "Bahia"   
</pre><p>Will produce the following stub:</p><pre>
North America   
  Canada   
    Ontario   
  USA   
    New York   
South America  
  Brazil 
    Amazonas   
    Bahia   
</pre><p>With the following code:</p><pre>
<span class='va'>tbl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='create_table.html'>create_table</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>stub</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>continent</span>, <span class='va'>country</span>, <span class='va'>state_province</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>country</span>, indent <span class='op'>=</span> <span class='fl'>.25</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>state_province</span>, indent <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span>
</pre>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other table: 
<code><a href='column_defaults.html'>column_defaults</a>()</code>,
<code><a href='create_table.html'>create_table</a>()</code>,
<code><a href='define.html'>define</a>()</code>,
<code><a href='print.table_spec.html'>print.table_spec</a>()</code>,
<code><a href='spanning_header.html'>spanning_header</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>reporter</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>

<span class='co'># Create temporary path</span>
<span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"stub.txt"</span><span class='op'>)</span>

<span class='co'># Read in prepared data</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span>header <span class='op'>=</span> <span class='cn'>TRUE</span>, text <span class='op'>=</span> <span class='st'>'
      var      label        A             B          
      "ampg"   "N"          "19"          "13"         
      "ampg"   "Mean"       "18.8 (6.5)"  "22.0 (4.9)" 
      "ampg"   "Median"     "16.4"        "21.4"       
      "ampg"   "Q1 - Q3"    "15.1 - 21.2" "19.2 - 22.8"
      "ampg"   "Range"      "10.4 - 33.9" "14.7 - 32.4"
      "cyl"    "8 Cylinder" "10 ( 52.6%)" "4 ( 30.8%)" 
      "cyl"    "6 Cylinder" "4 ( 21.1%)"  "3 ( 23.1%)" 
      "cyl"    "4 Cylinder" "5 ( 26.3%)"  "6 ( 46.2%)"'</span><span class='op'>)</span>

<span class='co'># Create table</span>
<span class='va'>tbl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='create_table.html'>create_table</a></span><span class='op'>(</span><span class='va'>df</span>, first_row_blank <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>stub</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>var</span>, <span class='va'>label</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>var</span>, blank_after <span class='op'>=</span> <span class='cn'>TRUE</span>, label_row <span class='op'>=</span> <span class='cn'>TRUE</span>, 
         format <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>ampg <span class='op'>=</span> <span class='st'>"Miles Per Gallon"</span>, cyl <span class='op'>=</span> <span class='st'>"Cylinders"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>label</span>, indent <span class='op'>=</span> <span class='fl'>.25</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>A</span>, label <span class='op'>=</span> <span class='st'>"Group A"</span>, align <span class='op'>=</span> <span class='st'>"center"</span>, n <span class='op'>=</span> <span class='fl'>19</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='define.html'>define</a></span><span class='op'>(</span><span class='va'>B</span>, label <span class='op'>=</span> <span class='st'>"Group B"</span>, align <span class='op'>=</span> <span class='st'>"center"</span>, n <span class='op'>=</span> <span class='fl'>13</span><span class='op'>)</span>


<span class='co'># Create report and add content</span>
<span class='va'>rpt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='create_report.html'>create_report</a></span><span class='op'>(</span><span class='va'>tmp</span>, orientation <span class='op'>=</span> <span class='st'>"portrait"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='page_header.html'>page_header</a></span><span class='op'>(</span>left <span class='op'>=</span> <span class='st'>"Client: Motor Trend"</span>, right <span class='op'>=</span> <span class='st'>"Study: Cars"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='titles.html'>titles</a></span><span class='op'>(</span><span class='st'>"Table 1.0"</span>, <span class='st'>"MTCARS Summary Table"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='add_content.html'>add_content</a></span><span class='op'>(</span><span class='va'>tbl</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='footnotes.html'>footnotes</a></span><span class='op'>(</span><span class='st'>"* Motor Trend, 1974"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='page_footer.html'>page_footer</a></span><span class='op'>(</span>left <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.time.html'>Sys.time</a></span><span class='op'>(</span><span class='op'>)</span>, 
              center <span class='op'>=</span> <span class='st'>"Confidential"</span>, 
              right <span class='op'>=</span> <span class='st'>"Page [pg] of [tpg]"</span><span class='op'>)</span>

<span class='co'># Write out report</span>
<span class='fu'><a href='write_report.html'>write_report</a></span><span class='op'>(</span><span class='va'>rpt</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #555555;'># A report specification: 1 pages</span><span>
#&gt; - file_path: 'C:\Users\User\AppData\Local\Temp\Rtmp8cPIA3/stub.txt'
#&gt; - output_type: TXT
#&gt; - units: inches
#&gt; - orientation: portrait
#&gt; - line size/count: 78/60
#&gt; - page_header: left=Client: Motor Trend right=Study: Cars
#&gt; - title 1: 'Table 1.0'
#&gt; - title 2: 'MTCARS Summary Table'
#&gt; - footnote 1: '* Motor Trend, 1974'
#&gt; - page_footer: left=2020-12-20 09:37:23 center=Confidential right=Page [pg] of [tpg]
#&gt; - content: 
#&gt; </span><span style='color: #555555;'># A table specification:
#&gt; </span><span>- data: data.frame 'df' 8 rows 4 cols
#&gt; - show_cols: all
#&gt; - use_attributes: all
#&gt; - stub: var label align='left' 
#&gt; - define: var dedupe='TRUE' 
#&gt; - define: label 
#&gt; - define: A 'Group A' align='center' 
#&gt; - define: B 'Group B' align='center' </div><div class='input'>
<span class='co'># View report in console</span>
<span class='fu'><a href='https://rdrr.io/r/base/writeLines.html'>writeLines</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/readLines.html'>readLines</a></span><span class='op'>(</span><span class='va'>tmp</span>, encoding <span class='op'>=</span> <span class='st'>"UTF-8"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Client: Motor Trend                                                Study: Cars
#&gt;                                    Table 1.0
#&gt;                              MTCARS Summary Table
#&gt; 
#&gt;                                      Group A     Group B
#&gt;                                      (N=19)      (N=13)
#&gt;                   ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
#&gt; 
#&gt;                   Miles Per Gallon
#&gt;                      N                 19          13
#&gt;                      Mean          18.8 (6.5)  22.0 (4.9)
#&gt;                      Median           16.4        21.4
#&gt;                      Q1 - Q3       15.1 - 21.2 19.2 - 22.8
#&gt;                      Range         10.4 - 33.9 14.7 - 32.4
#&gt; 
#&gt;                   Cylinders
#&gt;                      8 Cylinder    10 ( 52.6%) 4 ( 30.8%)
#&gt;                      6 Cylinder    4 ( 21.1%)  3 ( 23.1%)
#&gt;                      4 Cylinder    5 ( 26.3%)  6 ( 46.2%)
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; 
#&gt; * Motor Trend, 1974
#&gt; 
#&gt; 2020-12-20 09:37:23              Confidential                      Page 1 of 1</div><div class='input'>
<span class='co'># Client: Motor Trend                                                Study: Cars</span>
<span class='co'>#                                   Table 1.0</span>
<span class='co'>#                              MTCARS Summary Table</span>
<span class='co'># </span>
<span class='co'>#                                     Group A      Group B</span>
<span class='co'>#                                      (N=19)       (N=13)</span>
<span class='co'>#                 -------------------------------------------</span>
<span class='co'># </span>
<span class='co'>#                 Miles Per Gallon</span>
<span class='co'>#                    N                   19           13</span>
<span class='co'>#                    Mean            18.8 (6.5)   22.0 (4.9)</span>
<span class='co'>#                    Median             16.4         21.4</span>
<span class='co'>#                    Q1 - Q3        15.1 - 21.2  19.2 - 22.8</span>
<span class='co'>#                    Range          10.4 - 33.9  14.7 - 32.4</span>
<span class='co'>#</span>
<span class='co'>#                 Cylinders</span>
<span class='co'>#                    8 Cylinder     10 ( 52.6%)   4 ( 30.8%)</span>
<span class='co'>#                    6 Cylinder      4 ( 21.1%)   3 ( 23.1%)</span>
<span class='co'>#                    4 Cylinder      5 ( 26.3%)   6 ( 46.2%)</span>
<span class='co'># </span>
<span class='co'># ...</span>
<span class='co'># </span>
<span class='co'># </span>
<span class='co'># * Motor Trend, 1974</span>
<span class='co'># </span>
<span class='co'># 2020-08-30 03:50:02              Confidential                      Page 1 of 1</span>
<span class='co'>#</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


